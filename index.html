<script>
  // Initialize the Kakao SDK with the actual JavaScript key
  Kakao.init('90ed090fa6d7044e65e276410a0232d7');
  console.log('Kakao SDK initialized');

  // Improved mobile detection function
  function isMobile() {
    const userAgent = navigator.userAgent || navigator.vendor || window.opera;
    const mobileRegex = /(android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini)/i;
    const isSmallScreen = window.innerWidth <= 768;
    return mobileRegex.test(userAgent) || isSmallScreen;
  }

  // Kakao login/easy sign-up function
  function loginWithKakao() {
    console.log('loginWithKakao function called');
    var options = {
      scope: 'profile_nickname, profile_image, account_email',
      success: function(authObj) {
        console.log("Login/Easy Sign-up Success:", authObj);
        // Additional processing after login success (e.g., request user information)
        Kakao.API.request({
          url: '/v2/user/me',
          success: function(res) {
            console.log("User info:", res);
            // Additional processing can be written here
          },
          fail: function(error) {
            console.error("User info request failed:", error);
          }
        });
      },
      fail: function(err) {
        console.error("Login/Easy Sign-up Failed:", err);
      }
    };

    // If it's a mobile device, attempt native login via KakaoTalk app
    if (isMobile()) {
      console.log('Mobile device detected');
      options.throughTalk = true;
    } else {
      console.log('Non-mobile device detected');
    }
    
    Kakao.Auth.login(options);
  }
</script>
